#### 备忘
```txt
多台服务器使用相同副本来提高可用性（若干服务器使用相同数据集）是将数据同步在多个服务器的过程，类似于Mysql的读写分离...

            [Slave] <---> [Master] <---> [Slave]

默认Slave/Slave之间也将进行通信（当主挂掉时自动从若干从服务器选主）使用命令 "rs.status();" 查看当前的状态....

流程：
        1.主节点记录在其上的所有操作oplog，从节点定期轮询主节点获取这些操作
        2.然后从节点对自己的数据副本执行这些操作，从而保证从节点的数据与主节点一致

只能通过主节点将Mongo服务添加到副本集中， 判断当前运行的实例是否为主节点可以使用命令： db.isMaster()
复制提供了数据的冗余备份，并在多个服务器上存储数据副本，提高了数据的可用性， 并可以保证数据的安全性。
复制还允许您从硬件故障和服务中断中恢复数据。副本集在主宕机后，副本会接管主节点成为主节点，不会出现宕机的情况
```

#### Example
```bash
[root@localhost ~]# mkdir -p /db/{17,18,19}    #准备三个实例的数据目录

[root@localhost ~]# #启动并声明实例属于某复制集：
[root@localhost ~]# ./mongod --port 100017 --dbpath /db/17 --logpath log/ins.17.log --fork --replSet <复制集1>
[root@localhost ~]# ./mongod --port 100018 --dbpath /db/18 --logpath log/ins.18.log --fork --replSet <复制集1>
[root@localhost ~]# ./mongod --port 100019 --dbpath /db/19 --logpath log/ins.19.log --fork --replSet <复制集1>

#进入数据库指定集合名和成员（JS语言格式）：
> use admin;
> var rsconf = {_id:复制集1,members:[
        {_id:0,host:'192.168.1.1:100017'},
        {_id:1,host:'192.168.1.1:100018'},
        {_id:2,host:'192.168.1.1:100019'}]
        };
> rs.conf();                    #查看配置
> rs.initiate(rsconf);          #根据配置进行repliset初始化，重读配置文件：rs.reconfig(rsconf);
> rs.status();                  #查看各成员主从身份和健康状态

#默认从主节点读写数据，副本节点上不允许读，需在从节点设置其设置其可读!...
repset:SECONDARY> db.getMongo().setSlaveOk();

#后期：
#删除节点：	rs.remove('IP:Port');
#添加节点：	重新执行：var rsconf = (....) 后进行 rs.reconfig(rsconf) 进行初始化
#           或执行：rs.add("<address>:<port>") 并 rs.reconfig(rsconf) 进行初始化

#正常情况下从库仅能与主库交互而不能写操作，可使用命令：rs.slaveOK();

#命令帮助：rs.help();
```
