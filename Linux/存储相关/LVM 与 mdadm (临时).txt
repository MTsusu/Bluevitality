LVM 逻辑卷，设置LVM前需用fdisk的t参数将磁盘分区类型改为“8e”并重读分区表：partprobe
1. PE：     8e 默认块大小4M
2. PV：     物理卷
3. VG：     卷组
4. LV：     逻辑卷
物理卷 卷组 逻辑卷
扫描： pvscan      vgscan           lvscan
建立： pvcreate      vgcreate      lvcreate
显示： pvdisplay      vgdisplay      lvdisplay
删除： pvremove      vgremove      lvremove
扩展： ---------      vgextend      lvextend
减小： ---------      vgreduce      lvreduce
其他： pvmove      vgchange      resize2fs

创建：
pvcreate  /dev/sdb2
vgcreate -s 4M vg01 /dev/sdb2 指定PE大小：-s
lvcreate -L 5G -n lv01 vg01
mkfs -t ext4 /dev/vg01/lv01 格式化后挂载

扩容：
pvcreate /dev/sda6
vgextend vg01 /dev/sda6
lvextend -L 1G /dev/vg01/lv01 不影响原数据！（-L 1G：指定扩容到1G、  -L +1G： 增加1G）
e2fsck -f /dev/vg01/lv01 先进行磁盘检查（因修改设备需先检查）
resize2fs /dev/vg01/lv01 重读文件系统大小（默认设为LV最大容量、指定容量：resize2fs /dev/vg01/lv01 5G）

缩小：
umount /dev/vg01/lv01
e2fsck -f /dev/vg01/lv01
resize2fs /dev/vg01/lv01  20G 减小LV01文件系统容量容量到20G（剩余可减小）
lvchange –an /dev/vg01/lv01 使lv的访问禁止
lvreduce -L 20G  /dev/vg01/lv01 把LV01减20G容量（还有lvresize可修改其逻辑边界）
lvchange –an /dev/vg01/lv01 使lv的访问开启
pvmove  /dev/sda5 数据移到其他PV
vgreduce vg01   /dev/sdb5 从卷组移除
pvremove  /dev/sda5 删除PV
e2fsck -f /dev/vg01/lv01 磁盘检查
mount /dev/vg01/lv01 /mnt

删除：
umount    /dev/vg01/lv01 卸载
vgchange –an /dev/vg1  关闭VG，开启：vgchange –ay /dev/vg1 
lvremove /dev/vg01/lv01
vgremove /dev/vg01
pvremove /dev/sdb5

快照： "镜像卷需与被镜像卷在相同卷组，快照将进行差异备份来提供还原,,因此需预先计划好镜像卷的空间用于存储差异数据"
lvcreate -s -p -L 3G -n LVMMoniter  /dev/vg01/lv01 注: -p:设为只读（非必选），-s:创建快照
mount  /dev/vg01/LVMMoniter  /mnt/lvs  ;  tar -czvf backup  /mnt/lvs/*  备份快照状态
umount /mnt/LVMMoniter ; lvremove /dev/vg01/LVMMoniter 卸载并移出快照

还原：
umount /mnt/lv01 ; mkfs.ext4  /dev/vg01/lv01  ; mount  /dev/vg01/lv01 /mnt/lv01 格式化并重新挂载
tar -xzvf backup  -C /mnt/lv01 还原

重新读取分区表： partx -a /dev/sdb

查看设备信息：
mdadm -D /dev/md? -D/--detail
cat /proc/mdstat

创建配置文件：
mdadm -Ds >/etc/mdadm.conf -D、--scan

创建阵列：
mdadm -C /dev/md0 -a yes -l 0 -n 3 /dev/sd{a,b,c}1
mdadm -C /dev/md1 -a yes -l 5 -n 4 /dev/sd{a,b,c,e} -x 1 /dev/sde1

添加热备硬盘：
mdadm /dev/md0 -a /dev/sdb5 -a/--add

指定阵列LEVEL5的工作设备个数（将从热备硬盘中添加）
mdadm -G /dev/md5  -n 4

模拟指定阵列下的磁盘损坏并删除（如有能力默认将自动进行恢复，查看阵列信息及状态：mdadm -D /dev/md0）
mdadm  /dev/md0  -f  /dev/sdb --fail
mdadm  /dev/md0 -r  /dev/sdb --remove 

装配阵列（如将阵列磁盘拆下后移至其他设备时进行装配）
mdadm -A /dev/md1 /dev/sdb5 /dev/sdb6

完整删除整个阵列：
http://blog.csdn.net/igorzhang/article/details/20695093
